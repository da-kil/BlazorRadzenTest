@using Microsoft.AspNetCore.Components.Authorization
@using Radzen.Blazor
@using ti8m.BeachBreak.Client.Components.Shared
@inherits OptimizedTranslatableComponentBase

<input type="checkbox" title="@T("nav.menu-toggle")" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
	<RadzenPanelMenu Style="width: 100%; padding: 0;">
		<!-- Main Navigation -->
		<AuthorizeView Policy="HR">
			<Authorized>
				<RadzenPanelMenuItem Text="@T("nav.dashboard")" Path="hr-dashboard" />
			</Authorized>
			<NotAuthorized>
				<AuthorizeView Policy="TeamLead">
					<Authorized Context="teamLeadContext">
						<RadzenPanelMenuItem Text="@T("nav.dashboard")" Path="manager-dashboard" />
					</Authorized>
					<NotAuthorized Context="employeeContext">
						<RadzenPanelMenuItem Text="@T("nav.dashboard")" Path="dashboard" />
					</NotAuthorized>
				</AuthorizeView>
			</NotAuthorized>
		</AuthorizeView>

		<!-- My Work Section -->
		<RadzenPanelMenuItem Text="@T("nav.my-work")" Expanded="true">
			<RadzenPanelMenuItem Text="@T("nav.my-questionnaires")" Path="my-questionnaires" />

			<AuthorizeView Policy="TeamLead">
				<Authorized>
					<RadzenPanelMenuItem Text="@T("nav.team-overview")" Path="team/questionnaires" />
					<RadzenPanelMenuItem Text="@T("nav.employee-feedback")" Path="employee-feedback-management" />

					<!-- Show Feedback Templates only for TeamLead users who are NOT HR -->
					<AuthorizeView Policy="HR">
						<NotAuthorized Context="nonHRContext">
							<RadzenPanelMenuItem Text="@T("nav.feedback-templates")" Path="feedback-template-management" />
						</NotAuthorized>
					</AuthorizeView>
				</Authorized>
			</AuthorizeView>

			<AuthorizeView Policy="HR">
				<Authorized>
					<RadzenPanelMenuItem Text="@T("nav.organization")" Path="organization/questionnaires" />
				</Authorized>
			</AuthorizeView>
		</RadzenPanelMenuItem>

		<!-- Management Section -->
		<AuthorizeView Policy="HR">
			<Authorized>
				<RadzenPanelMenuItem Text="@T("nav.management")" Expanded="false">
					<RadzenPanelMenuItem Text="@T("nav.manage-questionnaires")" Path="questionnaire-management" />
					<RadzenPanelMenuItem Text="@T("nav.assignments")" Path="questionnaire-assignments" />
					<RadzenPanelMenuItem Text="@T("nav.manage-feedback-templates")" Path="feedback-template-management" />
				</RadzenPanelMenuItem>
			</Authorized>
		</AuthorizeView>

		<!-- Administration Section -->
		<AuthorizeView Policy="HR">
			<Authorized>
				<RadzenPanelMenuItem Text="@T("nav.administration")" Expanded="false">
					<RadzenPanelMenuItem Text="@T("nav.categories")" Path="admin/categories" />
					<RadzenPanelMenuItem Text="@T("nav.role-management")" Path="admin/roles" />

					<AuthorizeView Policy="Admin">
						<Authorized Context="adminContext">
							<RadzenPanelMenuItem Text="@T("nav.translations")" Path="admin/translations" />
							<RadzenPanelMenuItem Text="@T("nav.projection-replay")" Path="admin/projection-replay" />
						</Authorized>
					</AuthorizeView>
				</RadzenPanelMenuItem>
			</Authorized>
		</AuthorizeView>
	</RadzenPanelMenu>
</div>
