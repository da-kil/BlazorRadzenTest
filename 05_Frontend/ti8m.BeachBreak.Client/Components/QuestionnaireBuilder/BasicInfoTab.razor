@using Radzen.Blazor
@using ti8m.BeachBreak.Client.Models

<div class="basic-info-content">

    <RadzenRow Gap="1rem">
        <RadzenColumn Size="12" SizeMD="6">
            <div class="mb-3">
                <RadzenText TextStyle="TextStyle.Body1" Class="fw-bold mb-2">Template Name *</RadzenText>
                <RadzenTextBox @bind-Value="@Template.Name"
                              Placeholder="Enter template name"
                              Class="w-100"
                              Disabled="@(!Template.IsAvailableForEditing)" />
            </div>
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="6">
            <div class="mb-3">
                <RadzenText TextStyle="TextStyle.Body1" Class="fw-bold mb-2">Category</RadzenText>
                <RadzenDropDown @bind-Value="@Template.CategoryId"
                               Data="@Categories"
                               TextProperty="NameEn"
                               ValueProperty="Id"
                               Placeholder="Select category"
                               AllowClear="true"
                               Class="w-100"
                               Disabled="@(!Template.IsAvailableForEditing)" />
            </div>
        </RadzenColumn>
    </RadzenRow>

    <div class="mb-3">
        <RadzenText TextStyle="TextStyle.Body1" Class="fw-bold mb-2">Description</RadzenText>
        <RadzenTextArea @bind-Value="@Template.Description"
                      Placeholder="Describe the purpose and scope of this questionnaire..."
                      Rows="4"
                      Class="w-100"
                      Disabled="@(!Template.IsAvailableForEditing)" />
    </div>

    <div class="settings-section mt-4 p-3 bg-light rounded">
        <RadzenText TextStyle="TextStyle.Subtitle1" Class="fw-bold mb-3">Settings</RadzenText>
        <div class="mb-4 p-3 bg-white rounded border">
            <RadzenText TextStyle="TextStyle.Body1" Class="fw-bold mb-2">Workflow Configuration</RadzenText>
            <RadzenCheckBox @bind-Value="@Template.RequiresManagerReview" Name="requiresManagerReview" Disabled="@(!Template.IsAvailableForEditing)" />
            <RadzenLabel Text="Requires Manager Review" Component="requiresManagerReview" Style="font-weight: 500;" />
            <RadzenText TextStyle="TextStyle.Caption" Class="text-muted d-block mt-1 ms-4">
                When unchecked, the questionnaire will be automatically finalized after employee submission without manager review.
                All sections must be completed by employees only.
            </RadzenText>
        </div>
        <RadzenRow>
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCheckBox @bind-Value="@Template.Settings.AllowSaveProgress" Name="allowSave" Disabled="@(!Template.IsAvailableForEditing)" />
                <RadzenLabel Text="Allow Save Progress" Component="allowSave" />
            </RadzenColumn>
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCheckBox @bind-Value="@Template.Settings.ShowProgressBar" Name="showProgress" Disabled="@(!Template.IsAvailableForEditing)" />
                <RadzenLabel Text="Show Progress Bar" Component="showProgress" />
            </RadzenColumn>
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCheckBox @bind-Value="@Template.Settings.RequireAllSections" Name="requireAll" Disabled="@(!Template.IsAvailableForEditing)" />
                <RadzenLabel Text="Require All Sections" Component="requireAll" />
            </RadzenColumn>
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCheckBox @bind-Value="@Template.Settings.AllowReviewBeforeSubmit" Name="allowReview" Disabled="@(!Template.IsAvailableForEditing)" />
                <RadzenLabel Text="Allow Review Before Submit" Component="allowReview" />
            </RadzenColumn>
        </RadzenRow>
    </div>
</div>

<style>
.basic-info-content {
    padding: 0;
}

.settings-section {
    border: 1px solid #e9ecef;
}
</style>

@code {
    [Parameter, EditorRequired] public QuestionnaireTemplate Template { get; set; } = null!;
    [Parameter, EditorRequired] public IReadOnlyList<Category> Categories { get; set; } = null!;
}