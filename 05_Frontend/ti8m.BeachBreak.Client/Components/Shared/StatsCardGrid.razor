@using Radzen.Blazor

<RadzenRow Gap="1rem" Class="rz-mb-4">
    @foreach (var stat in Stats)
    {
        <RadzenColumn Size="12" SizeSM="6" SizeMD="@GetColumnSize()">
            @if (UseCards)
            {
                <RadzenCard Class="@($"text-center stats-card {stat.CssClass}")" Style="cursor: default; transition: none !important; transform: none !important;">
                    <RadzenIcon Icon="@stat.Icon"
                               Size="@IconSize"
                               Class="@($"{stat.IconClass} mb-2")" />
                    <RadzenText TextStyle="TextStyle.H4" Class="mb-1">
                        @stat.Value
                    </RadzenText>
                    <RadzenText TextStyle="TextStyle.Body2" Class="text-muted">
                        @stat.Label
                    </RadzenText>
                    @if (!string.IsNullOrEmpty(stat.SubLabel))
                    {
                        <RadzenText TextStyle="TextStyle.Caption" Class="text-muted">
                            @stat.SubLabel
                        </RadzenText>
                    }
                </RadzenCard>
            }
            else
            {
                <div class="@($"text-center stat-item rz-p-3 rz-border-radius-3 {stat.CssClass}")" style="background-color: var(--rz-body-background-color); border: 1px solid var(--rz-base-300); transition: box-shadow 0.2s;">
                    <RadzenIcon Icon="@stat.Icon"
                               Size="@IconSize"
                               Class="@($"{stat.IconClass} mb-2")" />
                    <RadzenText TextStyle="TextStyle.H4" Class="mb-1">
                        @stat.Value
                    </RadzenText>
                    <RadzenText TextStyle="TextStyle.Body2" Class="text-muted">
                        @stat.Label
                    </RadzenText>
                    @if (!string.IsNullOrEmpty(stat.SubLabel))
                    {
                        <RadzenText TextStyle="TextStyle.Caption" Class="text-muted">
                            @stat.SubLabel
                        </RadzenText>
                    }
                </div>
            }
        </RadzenColumn>
    }
</RadzenRow>

@code {
    [Parameter] public List<StatCard> Stats { get; set; } = new();
    [Parameter] public int Columns { get; set; } = 4;
    [Parameter] public string IconSize { get; set; } = "2rem";
    [Parameter] public bool UseCards { get; set; } = true;
    [Parameter] public EventCallback<StatCard> OnStatCardClick { get; set; }

    private int GetColumnSize()
    {
        return Columns switch
        {
            2 => 6,
            3 => 4,
            4 => 3,
            6 => 2,
            _ => 3
        };
    }

    public class StatCard
    {
        public string Label { get; set; } = "";
        public string Value { get; set; } = "";
        public string SubLabel { get; set; } = "";
        public string Icon { get; set; } = "";
        public string IconClass { get; set; } = "";
        public string CssClass { get; set; } = "";
        public object? Data { get; set; }
    }
}