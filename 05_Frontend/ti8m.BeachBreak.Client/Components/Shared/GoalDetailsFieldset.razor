@using Radzen
@using Radzen.Blazor
@inherits OptimizedTranslatableComponentBase

<RadzenStack Gap="1rem">
    <div>
        <RadzenLabel Text="@T("forms.objective-description-required")" Component="objectiveDescription" Class="fw-bold mb-1" />
        <RadzenTextArea Value="@ObjectiveDescription"
                      ValueChanged="@((string value) => OnObjectiveDescriptionChanged(value))"
                      Name="objectiveDescription"
                      Placeholder="@T("forms.describe-goal-objective")"
                      Rows="3"
                      Class="w-100"
                      MaxLength="1000" />
        <RadzenText TextStyle="TextStyle.Caption" Class="text-muted">
            @ObjectiveDescription.Length / 1000 @T("forms.characters")
        </RadzenText>
    </div>

    <div>
        <RadzenLabel Text="@T("forms.measurement-metric-required")" Component="measurementMetric" Class="fw-bold mb-1" />
        <RadzenTextBox Value="@MeasurementMetric"
                     ValueChanged="@((string value) => OnMeasurementMetricChanged(value))"
                     Name="measurementMetric"
                     Placeholder="@T("forms.how-measured")"
                     Class="w-100"
                     MaxLength="500" />
    </div>
</RadzenStack>

@code {
    /// <summary>
    /// The goal's objective description.
    /// </summary>
    [Parameter]
    public string ObjectiveDescription { get; set; } = "";

    /// <summary>
    /// Event callback when objective description changes.
    /// </summary>
    [Parameter]
    public EventCallback<string> ObjectiveDescriptionChanged { get; set; }

    /// <summary>
    /// How the goal will be measured.
    /// </summary>
    [Parameter]
    public string MeasurementMetric { get; set; } = "";

    /// <summary>
    /// Event callback when measurement metric changes.
    /// </summary>
    [Parameter]
    public EventCallback<string> MeasurementMetricChanged { get; set; }

    private async Task OnObjectiveDescriptionChanged(string value)
    {
        ObjectiveDescription = value;
        await ObjectiveDescriptionChanged.InvokeAsync(value);
    }

    private async Task OnMeasurementMetricChanged(string value)
    {
        MeasurementMetric = value;
        await MeasurementMetricChanged.InvokeAsync(value);
    }
}
